<!DOCTYPE html>
<html>
  <head>
    <title>Issue Tracker</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <style>
      body { padding: 20px; }
      .test-ui { background: #f8f9fa; padding: 20px; border-radius: 5px; margin-bottom: 30px; }
      code { color: #d63384; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Issue Tracker</h1>
      <p>FreeCodeCamp Quality Assurance Project</p>
      
      <div class="test-ui">
        <h3>Test the API:</h3>
        <div class="mb-3">
          <h4>Create Issue</h4>
          <form id="testForm" class="border p-3">
            <div class="row">
              <div class="col-md-4">
                <input type="text" class="form-control mb-2" name="issue_title" placeholder="Title*" required>
              </div>
              <div class="col-md-4">
                <textarea class="form-control mb-2" name="issue_text" placeholder="Text*" required></textarea>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control mb-2" name="created_by" placeholder="Created by*" required>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control mb-2" name="assigned_to" placeholder="Assigned to">
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control mb-2" name="status_text" placeholder="Status text">
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control mb-2" name="project" placeholder="Project name" value="test">
              </div>
            </div>
            <button type="submit" class="btn btn-primary mt-2">Submit Issue</button>
          </form>
        </div>
        
        <div class="mb-3">
          <h4>Get Issues</h4>
          <button id="getIssues" class="btn btn-secondary">Get All Issues</button>
        </div>
        
        <div class="mb-3">
          <h4>API Response</h4>
          <pre id="jsonResult" class="bg-dark text-light p-3" style="min-height: 200px;">{}</pre>
        </div>
      </div>
      
      <h3>API Endpoints:</h3>
      <ul>
        <li><code>POST /api/issues/{project}</code> - Create issue</li>
        <li><code>GET /api/issues/{project}</code> - Get all issues</li>
        <li><code>PUT /api/issues/{project}</code> - Update issue</li>
        <li><code>DELETE /api/issues/{project}</code> - Delete issue</li>
      </ul>
      
      <p>See <a href="https://www.freecodecamp.org/learn/quality-assurance/quality-assurance-projects/issue-tracker" target="_blank">project requirements</a>.</p>
    </div>
    
    <script>
      document.getElementById('testForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const data = Object.fromEntries(formData.entries());
        const project = data.project;
        delete data.project;
        
        const response = await fetch(`/api/issues/${project}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        const result = await response.json();
        document.getElementById('jsonResult').textContent = JSON.stringify(result, null, 2);
      });
      
      document.getElementById('getIssues').addEventListener('click', async () => {
        const project = 'test';
        const response = await fetch(`/api/issues/${project}`);
        const result = await response.json();
        document.getElementById('jsonResult').textContent = JSON.stringify(result, null, 2);
      });
    </script>
  </body>
</html>